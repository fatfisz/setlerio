<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><style>canvas{left:50%;max-height:100%;max-width:100%;position:fixed;top:50%;transform:translate(-50%,-50%);}</style><body><script>"use strict";const e={food:0,wood:2,stone:10,iron:0,gold:0};let t=0;function n(e=0){return t+1+o(e)}function o(e){return Math.round(.02*e)}class r{constructor({frame:e,duration:t=0,run:n}){this.frame=e,this.totalFrames=o(t),this.run=n}}const u=[];const c={townCenter:{name:"town center",count:1,requirements:[]},lumberjackHut:{name:"lumberjack's hut",count:0,requirements:[["wood",2],["stone",2]]},tower:{name:"tower",count:0,requirements:[["wood",2],["stone",3]]}};function s(t){const o=document.createElement("button");o.textContent="Build "+c[t].name,o.addEventListener("click",()=>{!function(t){const o=c[t],s=(a=o.requirements,a.filter(([t,n])=>n>e[t]).map(([e])=>"Not enough "+e));var a;if(s.length>0){const e=document.createElement("pre");e.textContent=s.join("\n"),document.body.append(e),i={frame:n(5e3),run:()=>{document.body.removeChild(e)}},u.push(new r(i))}else!function(t){t.forEach(([t,n])=>{e[t]-=n})}(o.requirements),o.count+=1;var i}(t)}),document.body.append(o)}function a(){!function(){const e=[];u.forEach((n,o)=>{const r=t-n.frame;r>n.totalFrames?e.push(o):r<0||n.run(r,n.totalFrames)}),e.reverse().forEach(e=>{u.splice(e,1)})}()}let i=0;document.title="setlerio",s("lumberjackHut"),s("tower"),function e(o){requestAnimationFrame(e),o>=i+49&&(i=o,t=n(),a())}(0);</script>
