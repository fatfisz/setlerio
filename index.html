<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><style>canvas{left:50%;max-height:100%;max-width:100%;position:fixed;top:50%;transform:translate(-50%,-50%);}</style><body><script>"use strict";const t={food:0,wood:2,stone:10,iron:0,gold:0};let n=0;function e(t=0){return n+1+o(t)}function o(t){return Math.round(.02*t)}class r{constructor({frame:t,duration:n=0,run:e}){this.frame=t,this.totalFrames=o(n),this.run=e}}const c=[];const u={townCenter:{name:"town center",count:1,requirements:[]},lumberjackHut:{name:"lumberjack's hut",count:0,requirements:[["wood",2],["stone",2]]},tower:{name:"tower",count:0,requirements:[["wood",2],["stone",3]]}};function a(n){const o=document.createElement("button");o.textContent="Build "+u[n].name,o.addEventListener("click",()=>{!function(n){const o=u[n],a=(i=o.requirements,i.filter(([n,e])=>e>t[n]).map(([t])=>"Not enough "+t));var i;if(a.length>0){const t=document.createElement("pre");t.textContent=a.join("\n"),document.body.append(t),s={frame:e(5e3),run:()=>{document.body.removeChild(t)}},c.push(new r(s))}else!function(n){n.forEach(([n,e])=>{t[n]-=e})}(o.requirements),o.count+=1;var s}(n)}),document.body.append(o)}function i(t,n){const e=document.createElement("canvas");e.width=t,e.height=n;const o=e.getContext("2d");return o.imageSmoothingEnabled=!1,[e,o]}function s(t,n,[e,o,r]){t[n]=e,t[n+1]=o,t[n+2]=r,t[n+3]=255}const m=new Map;const d={a:285679,b:277227,c:291407,d:277355,e:291535,f:266959,g:293711,h:285677,i:95,j:289575,k:285421,l:291401,m:1092147057,n:17407417,o:293743,p:267247,q:424815,r:284655,s:293327,t:271511,u:293741,v:273261,w:1106957873,x:285357,y:271853,z:291495,1:271514,2:291491,3:276643,4:282441,5:276687,6:273098,7:271655,8:273066,9:272810,0:273258," ":4096,".":80,",":112,"'":67,"!":87,":":74,"?":270503,"%":283301,"[":4951,"]":5035,"-":4144};function l(t,n){return function(t,n){const e=String(t);return m.has(e)||m.set(e,n()),m.get(e)}(["text",t,n],()=>{const[e,o]=function(t){const n=t.split("\n");return[Math.max(...n.map(f)),10*n.length-4]}(t),[r,c]=i(e,o),u=c.createImageData(e,o);let a=0,s=0;for(const e of t)"\n"===e?(a+=10,s=0):(h(u,n,s,a,e),s+=1+g(d[e]));return c.putImageData(u,0,0),r})}function h(t,n,e,o,r){const c=d[r],u=g(c);for(let r=0;r<32;r+=1)if(c&1<<r){const c=e+r%u,a=o+Math.floor(r/u);s(t.data,4*(a*t.width+c),n)}}function f(t){return[...t].reduce((t,n)=>t+g(d[n]),1*Math.max(t.length-1,0))}function g(t){return(t.toString(2).length-1)/6}const[p,w]=i(1e3,1e3),b=[[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1]];function M(){w.clearRect(0,0,1e3,1e3),w.lineJoin="round",w.lineWidth=3,w.strokeStyle="black";for(const t of b){const[n,e]=t;k(n,e)}}function k(t,n){const e=Math.round(1e3+240*(n+t))/2,o=Math.round(1e3+112*(n-t))/2,r=l(`[${t}, ${n}]`,[0,0,0]);w.drawImage(r,Math.round(e-1.5*r.width),Math.round(o-1.5*r.height),3*r.width,3*r.height),w.beginPath(),w.moveTo(e-40,o-56),w.lineTo(e+40,o-56),w.lineTo(e+80,o),w.lineTo(e+40,o+56),w.lineTo(e-40,o+56),w.lineTo(e-80,o),w.closePath(),w.stroke()}function v(){!function(){const t=[];c.forEach((e,o)=>{const r=n-e.frame;r>e.totalFrames?t.push(o):r<0||e.run(r,e.totalFrames)}),t.reverse().forEach(t=>{c.splice(t,1)})}(),M()}let E=0;document.title="setlerio",document.body.append(p),a("lumberjackHut"),a("tower"),function t(o){requestAnimationFrame(t),o>=E+49&&(E=o,n=e(),v())}(0);</script>
