<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><style>canvas{left:50%;max-height:100%;max-width:100%;position:fixed;top:50%;transform:translate(-50%,-50%);}</style><body><script>"use strict";const t={food:0,wood:2,stone:10,iron:0,gold:0};let n=0;function e(t=0){return n+1+o(t)}function o(t){return Math.round(.02*t)}class r{constructor({frame:t,duration:n=0,run:e}){this.frame=t,this.totalFrames=o(n),this.run=e}}const c=[];const u={townCenter:{name:"town center",count:1,requirements:[]},lumberjackHut:{name:"lumberjack's hut",count:0,requirements:[["wood",2],["stone",2]]},tower:{name:"tower",count:0,requirements:[["wood",2],["stone",3]]}};function i(n){const o=document.createElement("button");o.textContent="Build "+u[n].name,o.addEventListener("click",()=>{!function(n){const o=u[n],i=(a=o.requirements,a.filter(([n,e])=>e>t[n]).map(([t])=>"Not enough "+t));var a;if(i.length>0){const t=document.createElement("pre");t.textContent=i.join("\n"),document.body.append(t),s={frame:e(5e3),run:()=>{document.body.removeChild(t)}},c.push(new r(s))}else!function(n){n.forEach(([n,e])=>{t[n]-=e})}(o.requirements),o.count+=1;var s}(n)}),document.body.append(o)}function a(t,n){const e=document.createElement("canvas");e.width=t,e.height=n;const o=e.getContext("2d");return o.imageSmoothingEnabled=!1,[e,o]}function s(t,n,[e,o,r]){t[n]=e,t[n+1]=o,t[n+2]=r,t[n+3]=255}const l=new Map;const m={a:285679,b:277227,c:291407,d:277355,e:291535,f:266959,g:293711,h:285677,i:95,j:289575,k:285421,l:291401,m:1092147057,n:17407417,o:293743,p:267247,q:424815,r:284655,s:293327,t:271511,u:293741,v:273261,w:1106957873,x:285357,y:271853,z:291495,1:271514,2:291491,3:276643,4:282441,5:276687,6:273098,7:271655,8:273066,9:272810,0:273258," ":4096,".":80,",":112,"'":67,"!":87,":":74,"?":270503,"%":283301,"[":4951,"]":5035,"-":4144};function d(t,n,e=1/0){return function(t,n){const e=String(t);return l.has(e)||l.set(e,n()),l.get(e)}(["text",t,n,e],()=>{const[o,r,c]=function(t,n){const e=t.split("\n"),o=[];for(const t of e){const[e,...r]=t.split(" ");let c=e;for(const t of r){const e=`${c} ${t}`;h(e)<=n?c=e:(o.push(c),c=t)}o.push(c)}return[o.join("\n"),Math.max(...o.map(h)),10*o.length-4]}(t,e),[u,i]=a(r,c),s=i.createImageData(r,c);let l=0,d=0;for(const t of o)"\n"===t?(l+=10,d=0):(f(s,n,d,l,t),d+=1+g(m[t]));return i.putImageData(s,0,0),u})}function f(t,n,e,o,r){const c=m[r],u=g(c);for(let r=0,i=0;i<6;i+=1)for(let a=0;a<u;a+=1,r+=1)c&1<<r&&s(t.data,4*((o+i)*t.width+e+a),n)}function h(t){return""===t?0:[...t].reduce((t,n)=>t+g(m[n]),1*(t.length-1))}function g(t){return(t.toString(2).length-1)/6}const[p,w]=a(1e3,1e3),b=[[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1]];function k(){w.clearRect(0,0,1e3,1e3),w.lineJoin="round",w.lineWidth=3,w.strokeStyle="black";for(const t of b){const[n,e]=t;v(n,e)}}function v(t,n){const e=Math.round(1e3+240*(n+t))/2,o=Math.round(1e3+112*(n-t))/2,r=d(`[${t}, ${n}]`,[0,0,0]);w.drawImage(r,Math.round(e-1.5*r.width),Math.round(o-1.5*r.height),3*r.width,3*r.height),w.beginPath(),w.moveTo(e-40,o-56),w.lineTo(e+40,o-56),w.lineTo(e+80,o),w.lineTo(e+40,o+56),w.lineTo(e-40,o+56),w.lineTo(e-80,o),w.closePath(),w.stroke()}function E(){!function(){const t=[];c.forEach((e,o)=>{const r=n-e.frame;r>e.totalFrames?t.push(o):r<0||e.run(r,e.totalFrames)}),t.reverse().forEach(t=>{c.splice(t,1)})}(),k()}let q=0;document.title="setlerio",document.body.append(p),i("lumberjackHut"),i("tower"),function t(o){requestAnimationFrame(t),o>=q+49&&(q=o,n=e(),E())}(0);</script>
